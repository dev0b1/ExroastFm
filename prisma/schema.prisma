generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Song {
  id                    String    @id @default(uuid())
  title                 String
  story                 String
  style                 String
  lyrics                String?
  genre                 String?
  mood                  String?
  previewUrl            String
  fullUrl               String
  duration              Int       @default(30)
  isPurchased           Boolean   @default(false)
  isTemplate            Boolean   @default(false)
  purchaseTransactionId String?
  userId                String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  expiresAt             DateTime?

  @@index([userId])
  @@index([isPurchased])
  @@index([isTemplate])
}

model Transaction {
  id                String   @id
  songId            String?
  userId            String?
  amount            String
  currency          String
  status            String
  paddleData        String
  createdAt         DateTime @default(now())

  @@index([songId])
  @@index([userId])
}
